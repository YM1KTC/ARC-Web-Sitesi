#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const { promisify } = require('util');

const readFile = promisify(fs.readFile);
const writeFile = promisify(fs.writeFile);
const readdir = promisify(fs.readdir);
const stat = promisify(fs.stat);

// Configuration
const config = {
    postsDirectory: './src/data/post',
    assetsDirectory: './src/assets/images',
    backupDirectory: './blog-posts-backup',
    logFile: './fix-blog-posts.log'
};

// Logging utility
class Logger {
    constructor(logFile) {
        this.logFile = logFile;
        this.logs = [];
    }

    log(level, message, file = null) {
        const timestamp = new Date().toISOString();
        const logEntry = {
            timestamp,
            level,
            message,
            file
        };
        
        this.logs.push(logEntry);
        
        const logString = file 
            ? `[${timestamp}] ${level.toUpperCase()}: ${message} (${file})`
            : `[${timestamp}] ${level.toUpperCase()}: ${message}`;
        
        console.log(logString);
    }

    async saveLogs() {
        const logContent = this.logs.map(entry => 
            entry.file 
                ? `[${entry.timestamp}] ${entry.level.toUpperCase()}: ${entry.message} (${entry.file})`
                : `[${entry.timestamp}] ${entry.level.toUpperCase()}: ${entry.message}`
        ).join('\n');
        
        await writeFile(this.logFile, logContent);
        console.log(`\nLogs saved to ${this.logFile}`);
    }
}

// HTML entities mapping
const htmlEntities = {
    // Common HTML entities
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&apos;': "'",
    '&nbsp;': ' ',
    
    // Extended HTML entities
    '&copy;': '¬©',
    '&reg;': '¬Æ',
    '&trade;': '‚Ñ¢',
    '&hellip;': '‚Ä¶',
    '&mdash;': '‚Äî',
    '&ndash;': '‚Äì',
    '&ldquo;': '"',
    '&rdquo;': '"',
    '&lsquo;': '\u2018',
    '&rsquo;': '\u2019',
    '&bull;': '‚Ä¢',
    '&middot;': '¬∑',
    '&sect;': '¬ß',
    '&para;': '¬∂',
    '&dagger;': '‚Ä†',
    '&Dagger;': '‚Ä°',
    '&permil;': '‚Ä∞',
    '&lsaquo;': '‚Äπ',
    '&rsaquo;': '‚Ä∫',
    '&euro;': '‚Ç¨',
    '&pound;': '¬£',
    '&yen;': '¬•',
    '&cent;': '¬¢',
    '&curren;': '¬§',
    
    // Common Unicode entities
    '&#x1f3af;': 'üéØ',
    '&#x1f4e1;': 'üì°',
    '&#x1f4f1;': 'üì±',
    '&#x1f4fa;': 'üì∫',
    '&#x1f4fb;': 'üìª',
    '&#x1f4de;': 'üìû',
    '&#x1f4df;': 'üìü',
    '&#x1f4e2;': 'üì¢',
    '&#x1f4e3;': 'üì£',
    '&#x1f4e4;': 'üì§',
    '&#x1f4e5;': 'üì•',
    '&#x1f4e6;': 'üì¶',
    '&#x1f4e7;': 'üìß',
    '&#x1f4e8;': 'üì®',
    '&#x1f4e9;': 'üì©',
    '&#x1f4ea;': 'üì™',
    '&#x1f4eb;': 'üì´',
    '&#x1f4ec;': 'üì¨',
    '&#x1f4ed;': 'üì≠',
    '&#x1f4ee;': 'üìÆ',
    '&#x1f4ef;': 'üìØ',
    '&#x1f4f0;': 'üì∞',
    '&#x1f4f2;': 'üì≤',
    '&#x1f4f3;': 'üì≥',
    '&#x1f4f4;': 'üì¥',
    '&#x1f4f5;': 'üìµ',
    '&#x1f4f6;': 'üì∂',
    '&#x1f4f7;': 'üì∑',
    '&#x1f4f8;': 'üì∏',
    '&#x1f4f9;': 'üìπ',
    '&#x1f4fc;': 'üìº',
    '&#x1f4fd;': 'üìΩ',
    '&#x1f4ff;': 'üìø',
    '&#x1f500;': 'üîÄ',
    '&#x1f501;': 'üîÅ',
    '&#x1f502;': 'üîÇ',
    '&#x1f503;': 'üîÉ',
    '&#x1f504;': 'üîÑ',
    '&#x1f505;': 'üîÖ',
    '&#x1f506;': 'üîÜ',
    '&#x1f507;': 'üîá',
    '&#x1f508;': 'üîà',
    '&#x1f509;': 'üîâ',
    '&#x1f50a;': 'üîä',
    '&#x1f50b;': 'üîã',
    '&#x1f50c;': 'üîå',
    '&#x1f50d;': 'üîç',
    '&#x1f50e;': 'üîé',
    '&#x1f50f;': 'üîè',
    '&#x1f510;': 'üîê',
    '&#x1f511;': 'üîë',
    '&#x1f512;': 'üîí',
    '&#x1f513;': 'üîì',
    '&#x1f514;': 'üîî',
    '&#x1f515;': 'üîï',
    '&#x1f516;': 'üîñ',
    '&#x1f517;': 'üîó',
    '&#x1f518;': 'üîò',
    '&#x1f519;': 'üîô',
    '&#x1f51a;': 'üîö',
    '&#x1f51b;': 'üîõ',
    '&#x1f51c;': 'üîú',
    '&#x1f51d;': 'üîù',
    '&#x1f51e;': 'üîû',
    '&#x1f51f;': 'üîü',
    '&#x1f520;': 'üî†',
    '&#x1f521;': 'üî°',
    '&#x1f522;': 'üî¢',
    '&#x1f523;': 'üî£',
    '&#x1f524;': 'üî§',
    '&#x1f525;': 'üî•',
    '&#x1f526;': 'üî¶',
    '&#x1f527;': 'üîß',
    '&#x1f528;': 'üî®',
    '&#x1f529;': 'üî©',
    '&#x1f52a;': 'üî™',
    '&#x1f52b;': 'üî´',
    '&#x1f52c;': 'üî¨',
    '&#x1f52d;': 'üî≠',
    '&#x1f52e;': 'üîÆ',
    '&#x1f52f;': 'üîØ',
    '&#x1f530;': 'üî∞',
    '&#x1f531;': 'üî±',
    '&#x1f532;': 'üî≤',
    '&#x1f533;': 'üî≥',
    '&#x1f534;': 'üî¥',
    '&#x1f535;': 'üîµ',
    '&#x1f536;': 'üî∂',
    '&#x1f537;': 'üî∑',
    '&#x1f538;': 'üî∏',
    '&#x1f539;': 'üîπ',
    '&#x1f53a;': 'üî∫',
    '&#x1f53b;': 'üîª',
    '&#x1f53c;': 'üîº',
    '&#x1f53d;': 'üîΩ',
    '&#x1f680;': 'üöÄ',
    '&#x1f681;': 'üöÅ',
    '&#x1f682;': 'üöÇ',
    '&#x1f683;': 'üöÉ',
    '&#x1f684;': 'üöÑ',
    '&#x1f685;': 'üöÖ',
    '&#x1f686;': 'üöÜ',
    '&#x1f687;': 'üöá',
    '&#x1f688;': 'üöà',
    '&#x1f689;': 'üöâ',
    '&#x1f6a0;': 'üö†',
    '&#x1f6a1;': 'üö°',
    '&#x1f6a2;': 'üö¢',
    '&#x1f6a3;': 'üö£',
    '&#x1f6a4;': 'üö§',
    '&#x1f6a5;': 'üö•',
    '&#x1f6a6;': 'üö¶',
    '&#x1f6a7;': 'üöß',
    '&#x1f6a8;': 'üö®',
    '&#x1f6a9;': 'üö©',
    '&#x1f6aa;': 'üö™',
    '&#x1f6ab;': 'üö´',
    '&#x1f6ac;': 'üö¨',
    '&#x1f6ad;': 'üö≠',
    '&#x1f6ae;': 'üöÆ',
    '&#x1f6af;': 'üöØ',
    '&#x1f6b0;': 'üö∞',
    '&#x1f6b1;': 'üö±',
    '&#x1f6b2;': 'üö≤',
    '&#x1f6b3;': 'üö≥',
    '&#x1f6b4;': 'üö¥',
    '&#x1f6b5;': 'üöµ',
    '&#x1f6b6;': 'üö∂',
    '&#x1f6b7;': 'üö∑',
    '&#x1f6b8;': 'üö∏',
    '&#x1f6b9;': 'üöπ',
    '&#x1f6ba;': 'üö∫',
    '&#x1f6bb;': 'üöª',
    '&#x1f6bc;': 'üöº',
    '&#x1f6bd;': 'üöΩ',
    '&#x1f6be;': 'üöæ',
    '&#x1f6bf;': 'üöø',
    '&#x1f6c0;': 'üõÄ',
    '&#x1f6c1;': 'üõÅ',
    '&#x1f6c2;': 'üõÇ',
    '&#x1f6c3;': 'üõÉ',
    '&#x1f6c4;': 'üõÑ',
    '&#x1f6c5;': 'üõÖ',
    '&#x1f30d;': 'üåç',
    '&#x1f30e;': 'üåé',
    '&#x1f30f;': 'üåè',
    '&#x1f310;': 'üåê',
    '&#x1f311;': 'üåë',
    '&#x1f312;': 'üåí',
    '&#x1f313;': 'üåì',
    '&#x1f314;': 'üåî',
    '&#x1f315;': 'üåï',
    '&#x1f316;': 'üåñ',
    '&#x1f317;': 'üåó',
    '&#x1f318;': 'üåò',
    '&#x1f319;': 'üåô',
    '&#x1f31a;': 'üåö',
    '&#x1f31b;': 'üåõ',
    '&#x1f31c;': 'üåú',
    '&#x1f31d;': 'üåù',
    '&#x1f31e;': 'üåû',
    '&#x1f31f;': 'üåü',
    '&#x1f320;': 'üå†',
    '&#x1f321;': 'üå°',
    '&#x1f324;': 'üå§',
    '&#x1f325;': 'üå•',
    '&#x1f326;': 'üå¶',
    '&#x1f327;': 'üåß',
    '&#x1f328;': 'üå®',
    '&#x1f329;': 'üå©',
    '&#x1f32a;': 'üå™',
    '&#x1f32b;': 'üå´',
    '&#x1f32c;': 'üå¨',
    '&#x1f32d;': 'üå≠',
    '&#x1f32e;': 'üåÆ',
    '&#x1f32f;': 'üåØ',
    '&#x1f330;': 'üå∞',
    '&#x1f331;': 'üå±',
    '&#x1f332;': 'üå≤',
    '&#x1f333;': 'üå≥',
    '&#x1f334;': 'üå¥',
    '&#x1f335;': 'üåµ',
    '&#x1f336;': 'üå∂',
    '&#x1f337;': 'üå∑',
    '&#x1f338;': 'üå∏',
    '&#x1f339;': 'üåπ',
    '&#x1f33a;': 'üå∫',
    '&#x1f33b;': 'üåª',
    '&#x1f33c;': 'üåº',
    '&#x1f33d;': 'üåΩ',
    '&#x1f33e;': 'üåæ',
    '&#x1f33f;': 'üåø',
    '&#x1f340;': 'üçÄ',
    '&#x1f341;': 'üçÅ',
    '&#x1f342;': 'üçÇ',
    '&#x1f343;': 'üçÉ',
    '&#x1f344;': 'üçÑ',
    '&#x1f345;': 'üçÖ',
    '&#x1f346;': 'üçÜ',
    '&#x1f347;': 'üçá',
    '&#x1f348;': 'üçà',
    '&#x1f349;': 'üçâ',
    '&#x1f34a;': 'üçä',
    '&#x1f34b;': 'üçã',
    '&#x1f34c;': 'üçå',
    '&#x1f34d;': 'üçç',
    '&#x1f34e;': 'üçé',
    '&#x1f34f;': 'üçè',
    '&#x1f350;': 'üçê',
    '&#x1f351;': 'üçë',
    '&#x1f352;': 'üçí',
    '&#x1f353;': 'üçì',
    '&#x1f354;': 'üçî',
    '&#x1f355;': 'üçï',
    '&#x1f356;': 'üçñ',
    '&#x1f357;': 'üçó',
    '&#x1f358;': 'üçò',
    '&#x1f359;': 'üçô',
    '&#x1f35a;': 'üçö',
    '&#x1f35b;': 'üçõ',
    '&#x1f35c;': 'üçú',
    '&#x1f35d;': 'üçù',
    '&#x1f35e;': 'üçû',
    '&#x1f35f;': 'üçü',
    '&#x1f360;': 'üç†',
    '&#x1f361;': 'üç°',
    '&#x1f362;': 'üç¢',
    '&#x1f363;': 'üç£',
    '&#x1f364;': 'üç§',
    '&#x1f365;': 'üç•',
    '&#x1f366;': 'üç¶',
    '&#x1f367;': 'üçß',
    '&#x1f368;': 'üç®',
    '&#x1f369;': 'üç©',
    '&#x1f36a;': 'üç™',
    '&#x1f36b;': 'üç´',
    '&#x1f36c;': 'üç¨',
    '&#x1f36d;': 'üç≠',
    '&#x1f36e;': 'üçÆ',
    '&#x1f36f;': 'üçØ',
    '&#x1f370;': 'üç∞',
    '&#x1f371;': 'üç±',
    '&#x1f372;': 'üç≤',
    '&#x1f373;': 'üç≥',
    '&#x1f374;': 'üç¥',
    '&#x1f375;': 'üçµ',
    '&#x1f376;': 'üç∂',
    '&#x1f377;': 'üç∑',
    '&#x1f378;': 'üç∏',
    '&#x1f379;': 'üçπ',
    '&#x1f37a;': 'üç∫',
    '&#x1f37b;': 'üçª',
    '&#x1f37c;': 'üçº',
    '&#x1f37d;': 'üçΩ',
    '&#x1f37e;': 'üçæ',
    '&#x1f37f;': 'üçø',
    '&#x1f380;': 'üéÄ',
    '&#x1f381;': 'üéÅ',
    '&#x1f382;': 'üéÇ',
    '&#x1f383;': 'üéÉ',
    '&#x1f384;': 'üéÑ',
    '&#x1f385;': 'üéÖ',
    '&#x1f386;': 'üéÜ',
    '&#x1f387;': 'üéá',
    '&#x1f388;': 'üéà',
    '&#x1f389;': 'üéâ',
    '&#x1f38a;': 'üéä',
    '&#x1f38b;': 'üéã',
    '&#x1f38c;': 'üéå',
    '&#x1f38d;': 'üéç',
    '&#x1f38e;': 'üéé',
    '&#x1f38f;': 'üéè',
    '&#x1f390;': 'üéê',
    '&#x1f391;': 'üéë',
    '&#x1f392;': 'üéí',
    '&#x1f393;': 'üéì',
    '&#x1f396;': 'üéñ',
    '&#x1f397;': 'üéó',
    '&#x1f399;': 'üéô',
    '&#x1f39a;': 'üéö',
    '&#x1f39b;': 'üéõ',
    '&#x1f39e;': 'üéû',
    '&#x1f39f;': 'üéü',
    '&#x1f3a0;': 'üé†',
    '&#x1f3a1;': 'üé°',
    '&#x1f3a2;': 'üé¢',
    '&#x1f3a3;': 'üé£',
    '&#x1f3a4;': 'üé§',
    '&#x1f3a5;': 'üé•',
    '&#x1f3a6;': 'üé¶',
    '&#x1f3a7;': 'üéß',
    '&#x1f3a8;': 'üé®',
    '&#x1f3a9;': 'üé©',
    '&#x1f3aa;': 'üé™',
    '&#x1f3ab;': 'üé´',
    '&#x1f3ac;': 'üé¨',
    '&#x1f3ad;': 'üé≠',
    '&#x1f3ae;': 'üéÆ',
    '&#x1f3b0;': 'üé∞',
    '&#x1f3b1;': 'üé±',
    '&#x1f3b2;': 'üé≤',
    '&#x1f3b3;': 'üé≥',
    '&#x1f3b4;': 'üé¥',
    '&#x1f3b5;': 'üéµ',
    '&#x1f3b6;': 'üé∂',
    '&#x1f3b7;': 'üé∑',
    '&#x1f3b8;': 'üé∏',
    '&#x1f3b9;': 'üéπ',
    '&#x1f3ba;': 'üé∫',
    '&#x1f3bb;': 'üéª',
    '&#x1f3bc;': 'üéº',
    '&#x1f3bd;': 'üéΩ',
    '&#x1f3be;': 'üéæ',
    '&#x1f3bf;': 'üéø',
    '&#x1f3c0;': 'üèÄ',
    '&#x1f3c1;': 'üèÅ',
    '&#x1f3c2;': 'üèÇ',
    '&#x1f3c3;': 'üèÉ',
    '&#x1f3c4;': 'üèÑ',
    '&#x1f3c5;': 'üèÖ',
    '&#x1f3c6;': 'üèÜ',
    '&#x1f3c7;': 'üèá',
    '&#x1f3c8;': 'üèà',
    '&#x1f3c9;': 'üèâ',
    '&#x1f3ca;': 'üèä',
    '&#x1f3cb;': 'üèã',
    '&#x1f3cc;': 'üèå',
    '&#x1f3cd;': 'üèç',
    '&#x1f3ce;': 'üèé',
    '&#x1f3cf;': 'üèè',
    '&#x1f3d0;': 'üèê',
    '&#x1f3d1;': 'üèë',
    '&#x1f3d2;': 'üèí',
    '&#x1f3d3;': 'üèì',
    '&#x1f3d4;': 'üèî',
    '&#x1f3d5;': 'üèï',
    '&#x1f3d6;': 'üèñ',
    '&#x1f3d7;': 'üèó',
    '&#x1f3d8;': 'üèò',
    '&#x1f3d9;': 'üèô',
    '&#x1f3da;': 'üèö',
    '&#x1f3db;': 'üèõ',
    '&#x1f3dc;': 'üèú',
    '&#x1f3dd;': 'üèù',
    '&#x1f3de;': 'üèû',
    '&#x1f3df;': 'üèü',
    '&#x1f3e0;': 'üè†',
    '&#x1f3e1;': 'üè°',
    '&#x1f3e2;': 'üè¢',
    '&#x1f3e3;': 'üè£',
    '&#x1f3e4;': 'üè§',
    '&#x1f3e5;': 'üè•',
    '&#x1f3e6;': 'üè¶',
    '&#x1f3e7;': 'üèß',
    '&#x1f3e8;': 'üè®',
    '&#x1f3e9;': 'üè©',
    '&#x1f3ea;': 'üè™',
    '&#x1f3eb;': 'üè´',
    '&#x1f3ec;': 'üè¨',
    '&#x1f3ed;': 'üè≠',
    '&#x1f3ee;': 'üèÆ',
    '&#x1f3ef;': 'üèØ',
    '&#x1f3f0;': 'üè∞',
    '&#x1f3f3;': 'üè≥',
    '&#x1f3f4;': 'üè¥',
    '&#x1f3f5;': 'üèµ',
    '&#x1f3f7;': 'üè∑',
    '&#x1f3f8;': 'üè∏',
    '&#x1f3f9;': 'üèπ',
    '&#x1f3fa;': 'üè∫',
    '&#x1f3fb;': 'üèª',
    '&#x1f3fc;': 'üèº',
    '&#x1f3fd;': 'üèΩ',
    '&#x1f3fe;': 'üèæ',
    '&#x1f3ff;': 'üèø',
    '&#x1f400;': 'üêÄ',
    '&#x1f401;': 'üêÅ',
    '&#x1f402;': 'üêÇ',
    '&#x1f403;': 'üêÉ',
    '&#x1f404;': 'üêÑ',
    '&#x1f405;': 'üêÖ',
    '&#x1f406;': 'üêÜ',
    '&#x1f407;': 'üêá',
    '&#x1f408;': 'üêà',
    '&#x1f409;': 'üêâ',
    '&#x1f40a;': 'üêä',
    '&#x1f40b;': 'üêã',
    '&#x1f40c;': 'üêå',
    '&#x1f40d;': 'üêç',
    '&#x1f40e;': 'üêé',
    '&#x1f40f;': 'üêè',
    '&#x1f410;': 'üêê',
    '&#x1f411;': 'üêë',
    '&#x1f412;': 'üêí',
    '&#x1f413;': 'üêì',
    '&#x1f414;': 'üêî',
    '&#x1f415;': 'üêï',
    '&#x1f416;': 'üêñ',
    '&#x1f417;': 'üêó',
    '&#x1f418;': 'üêò',
    '&#x1f419;': 'üêô',
    '&#x1f41a;': 'üêö',
    '&#x1f41b;': 'üêõ',
    '&#x1f41c;': 'üêú',
    '&#x1f41d;': 'üêù',
    '&#x1f41e;': 'üêû',
    '&#x1f41f;': 'üêü',
    '&#x1f420;': 'üê†',
    '&#x1f421;': 'üê°',
    '&#x1f422;': 'üê¢',
    '&#x1f423;': 'üê£',
    '&#x1f424;': 'üê§',
    '&#x1f425;': 'üê•',
    '&#x1f426;': 'üê¶',
    '&#x1f427;': 'üêß',
    '&#x1f428;': 'üê®',
    '&#x1f429;': 'üê©',
    '&#x1f42a;': 'üê™',
    '&#x1f42b;': 'üê´',
    '&#x1f42c;': 'üê¨',
    '&#x1f42d;': 'üê≠',
    '&#x1f42e;': 'üêÆ',
    '&#x1f42f;': 'üêØ',
    '&#x1f430;': 'üê∞',
    '&#x1f431;': 'üê±',
    '&#x1f432;': 'üê≤',
    '&#x1f433;': 'üê≥',
    '&#x1f434;': 'üê¥',
    '&#x1f435;': 'üêµ',
    '&#x1f436;': 'üê∂',
    '&#x1f437;': 'üê∑',
    '&#x1f438;': 'üê∏',
    '&#x1f439;': 'üêπ',
    '&#x1f43a;': 'üê∫',
    '&#x1f43b;': 'üêª',
    '&#x1f43c;': 'üêº',
    '&#x1f43d;': 'üêΩ',
    '&#x1f43e;': 'üêæ',
    '&#x1f43f;': 'üêø',
    '&#x1f440;': 'üëÄ',
    '&#x1f441;': 'üëÅ',
    '&#x1f442;': 'üëÇ',
    '&#x1f443;': 'üëÉ',
    '&#x1f444;': 'üëÑ',
    '&#x1f445;': 'üëÖ',
    '&#x1f446;': 'üëÜ',
    '&#x1f447;': 'üëá',
    '&#x1f448;': 'üëà',
    '&#x1f449;': 'üëâ',
    '&#x1f44a;': 'üëä',
    '&#x1f44b;': 'üëã',
    '&#x1f44c;': 'üëå',
    '&#x1f44d;': 'üëç',
    '&#x1f44e;': 'üëé',
    '&#x1f44f;': 'üëè',
    '&#x1f450;': 'üëê',
    '&#x1f451;': 'üëë',
    '&#x1f452;': 'üëí',
    '&#x1f453;': 'üëì',
    '&#x1f454;': 'üëî',
    '&#x1f455;': 'üëï',
    '&#x1f456;': 'üëñ',
    '&#x1f457;': 'üëó',
    '&#x1f458;': 'üëò',
    '&#x1f459;': 'üëô',
    '&#x1f45a;': 'üëö',
    '&#x1f45b;': 'üëõ',
    '&#x1f45c;': 'üëú',
    '&#x1f45d;': 'üëù',
    '&#x1f45e;': 'üëû',
    '&#x1f45f;': 'üëü',
    '&#x1f460;': 'üë†',
    '&#x1f461;': 'üë°',
    '&#x1f462;': 'üë¢',
    '&#x1f463;': 'üë£',
    '&#x1f464;': 'üë§',
    '&#x1f465;': 'üë•',
    '&#x1f466;': 'üë¶',
    '&#x1f467;': 'üëß',
    '&#x1f468;': 'üë®',
    '&#x1f469;': 'üë©',
    '&#x1f46a;': 'üë™',
    '&#x1f46b;': 'üë´',
    '&#x1f46c;': 'üë¨',
    '&#x1f46d;': 'üë≠',
    '&#x1f46e;': 'üëÆ',
    '&#x1f46f;': 'üëØ',
    '&#x1f470;': 'üë∞',
    '&#x1f471;': 'üë±',
    '&#x1f472;': 'üë≤',
    '&#x1f473;': 'üë≥',
    '&#x1f474;': 'üë¥',
    '&#x1f475;': 'üëµ',
    '&#x1f476;': 'üë∂',
    '&#x1f477;': 'üë∑',
    '&#x1f478;': 'üë∏',
    '&#x1f479;': 'üëπ',
    '&#x1f47a;': 'üë∫',
    '&#x1f47b;': 'üëª',
    '&#x1f47c;': 'üëº',
    '&#x1f47d;': 'üëΩ',
    '&#x1f47e;': 'üëæ',
    '&#x1f47f;': 'üëø',
    '&#x1f480;': 'üíÄ',
    '&#x1f481;': 'üíÅ',
    '&#x1f482;': 'üíÇ',
    '&#x1f483;': 'üíÉ',
    '&#x1f484;': 'üíÑ',
    '&#x1f485;': 'üíÖ',
    '&#x1f486;': 'üíÜ',
    '&#x1f487;': 'üíá',
    '&#x1f488;': 'üíà',
    '&#x1f489;': 'üíâ',
    '&#x1f48a;': 'üíä',
    '&#x1f48b;': 'üíã',
    '&#x1f48c;': 'üíå',
    '&#x1f48d;': 'üíç',
    '&#x1f48e;': 'üíé',
    '&#x1f48f;': 'üíè',
    '&#x1f490;': 'üíê',
    '&#x1f491;': 'üíë',
    '&#x1f492;': 'üíí',
    '&#x1f493;': 'üíì',
    '&#x1f494;': 'üíî',
    '&#x1f495;': 'üíï',
    '&#x1f496;': 'üíñ',
    '&#x1f497;': 'üíó',
    '&#x1f498;': 'üíò',
    '&#x1f499;': 'üíô',
    '&#x1f49a;': 'üíö',
    '&#x1f49b;': 'üíõ',
    '&#x1f49c;': 'üíú',
    '&#x1f49d;': 'üíù',
    '&#x1f49e;': 'üíû',
    '&#x1f49f;': 'üíü',
    '&#x1f4a0;': 'üí†',
    '&#x1f4a1;': 'üí°',
    '&#x1f4a2;': 'üí¢',
    '&#x1f4a3;': 'üí£',
    '&#x1f4a4;': 'üí§',
    '&#x1f4a5;': 'üí•',
    '&#x1f4a6;': 'üí¶',
    '&#x1f4a7;': 'üíß',
    '&#x1f4a8;': 'üí®',
    '&#x1f4a9;': 'üí©',
    '&#x1f4aa;': 'üí™',
    '&#x1f4ab;': 'üí´',
    '&#x1f4ac;': 'üí¨',
    '&#x1f4ad;': 'üí≠',
    '&#x1f4ae;': 'üíÆ',
    '&#x1f4af;': 'üíØ',
    '&#x1f4b0;': 'üí∞',
    '&#x1f4b1;': 'üí±',
    '&#x1f4b2;': 'üí≤',
    '&#x1f4b3;': 'üí≥',
    '&#x1f4b4;': 'üí¥',
    '&#x1f4b5;': 'üíµ',
    '&#x1f4b6;': 'üí∂',
    '&#x1f4b7;': 'üí∑',
    '&#x1f4b8;': 'üí∏',
    '&#x1f4b9;': 'üíπ',
    '&#x1f4ba;': 'üí∫',
    '&#x1f4bb;': 'üíª',
    '&#x1f4bc;': 'üíº',
    '&#x1f4bd;': 'üíΩ',
    '&#x1f4be;': 'üíæ',
    '&#x1f4bf;': 'üíø',
    '&#x1f4c0;': 'üìÄ',
    '&#x1f4c1;': 'üìÅ',
    '&#x1f4c2;': 'üìÇ',
    '&#x1f4c3;': 'üìÉ',
    '&#x1f4c4;': 'üìÑ',
    '&#x1f4c5;': 'üìÖ',
    '&#x1f4c6;': 'üìÜ',
    '&#x1f4c7;': 'üìá',
    '&#x1f4c8;': 'üìà',
    '&#x1f4c9;': 'üìâ',
    '&#x1f4ca;': 'üìä',
    '&#x1f4cb;': 'üìã',
    '&#x1f4cc;': 'üìå',
    '&#x1f4cd;': 'üìç',
    '&#x1f4ce;': 'üìé',
    '&#x1f4cf;': 'üìè',
    '&#x1f4d0;': 'üìê',
    '&#x1f4d1;': 'üìë',
    '&#x1f4d2;': 'üìí',
    '&#x1f4d3;': 'üìì',
    '&#x1f4d4;': 'üìî',
    '&#x1f4d5;': 'üìï',
    '&#x1f4d6;': 'üìñ',
    '&#x1f4d7;': 'üìó',
    '&#x1f4d8;': 'üìò',
    '&#x1f4d9;': 'üìô',
    '&#x1f4da;': 'üìö',
    '&#x1f4db;': 'üìõ',
    '&#x1f4dc;': 'üìú',
    '&#x1f4dd;': 'üìù',
    '&#x1f4de;': 'üìû',
    '&#x1f4df;': 'üìü',
    '&#x1f4e0;': 'üì†',
    '&#x1f4e1;': 'üì°',
    '&#x1f4e2;': 'üì¢',
    '&#x1f4e3;': 'üì£',
    '&#x1f4e4;': 'üì§',
    '&#x1f4e5;': 'üì•',
    '&#x1f4e6;': 'üì¶',
    '&#x1f4e7;': 'üìß',
    '&#x1f4e8;': 'üì®',
    '&#x1f4e9;': 'üì©',
    '&#x1f4ea;': 'üì™',
    '&#x1f4eb;': 'üì´',
    '&#x1f4ec;': 'üì¨',
    '&#x1f4ed;': 'üì≠',
    '&#x1f4ee;': 'üìÆ',
    '&#x1f4ef;': 'üìØ',
    '&#x1f4f0;': 'üì∞',
    '&#x1f4f1;': 'üì±',
    '&#x1f4f2;': 'üì≤',
    '&#x1f4f3;': 'üì≥',
    '&#x1f4f4;': 'üì¥',
    '&#x1f4f5;': 'üìµ',
    '&#x1f4f6;': 'üì∂',
    '&#x1f4f7;': 'üì∑',
    '&#x1f4f8;': 'üì∏',
    '&#x1f4f9;': 'üìπ',
    '&#x1f4fa;': 'üì∫',
    '&#x1f4fb;': 'üìª',
    '&#x1f4fc;': 'üìº',
    '&#x1f4fd;': 'üìΩ',
    '&#x1f4ff;': 'üìø',
    '&#x1f500;': 'üîÄ',
    '&#x1f501;': 'üîÅ',
    '&#x1f502;': 'üîÇ',
    '&#x1f503;': 'üîÉ',
    '&#x1f504;': 'üîÑ',
    '&#x1f505;': 'üîÖ',
    '&#x1f506;': 'üîÜ',
    '&#x1f507;': 'üîá',
    '&#x1f508;': 'üîà',
    '&#x1f509;': 'üîâ',
    '&#x1f50a;': 'üîä',
    '&#x1f50b;': 'üîã',
    '&#x1f50c;': 'üîå',
    '&#x1f50d;': 'üîç',
    '&#x1f50e;': 'üîé',
    '&#x1f50f;': 'üîè',
    '&#x1f510;': 'üîê',
    '&#x1f511;': 'üîë',
    '&#x1f512;': 'üîí',
    '&#x1f513;': 'üîì',
    '&#x1f514;': 'üîî',
    '&#x1f515;': 'üîï',
    '&#x1f516;': 'üîñ',
    '&#x1f517;': 'üîó',
    '&#x1f518;': 'üîò',
    '&#x1f519;': 'üîô',
    '&#x1f51a;': 'üîö',
    '&#x1f51b;': 'üîõ',
    '&#x1f51c;': 'üîú',
    '&#x1f51d;': 'üîù',
    '&#x1f51e;': 'üîû',
    '&#x1f51f;': 'üîü',
    '&#x1f520;': 'üî†',
    '&#x1f521;': 'üî°',
    '&#x1f522;': 'üî¢',
    '&#x1f523;': 'üî£',
    '&#x1f524;': 'üî§',
    '&#x1f525;': 'üî•',
    '&#x1f526;': 'üî¶',
    '&#x1f527;': 'üîß',
    '&#x1f528;': 'üî®',
    '&#x1f529;': 'üî©',
    '&#x1f52a;': 'üî™',
    '&#x1f52b;': 'üî´',
    '&#x1f52c;': 'üî¨',
    '&#x1f52d;': 'üî≠',
    '&#x1f52e;': 'üîÆ',
    '&#x1f52f;': 'üîØ',
    '&#x1f530;': 'üî∞',
    '&#x1f531;': 'üî±',
    '&#x1f532;': 'üî≤',
    '&#x1f533;': 'üî≥',
    '&#x1f534;': 'üî¥',
    '&#x1f535;': 'üîµ',
    '&#x1f536;': 'üî∂',
    '&#x1f537;': 'üî∑',
    '&#x1f538;': 'üî∏',
    '&#x1f539;': 'üîπ',
    '&#x1f53a;': 'üî∫',
    '&#x1f53b;': 'üîª',
    '&#x1f53c;': 'üîº',
    '&#x1f53d;': 'üîΩ',
    '&#x1f549;': 'üïâ',
    '&#x1f54a;': 'üïä',
    '&#x1f54b;': 'üïã',
    '&#x1f54c;': 'üïå',
    '&#x1f54d;': 'üïç',
    '&#x1f54e;': 'üïé',
    '&#x1f550;': 'üïê',
    '&#x1f551;': 'üïë',
    '&#x1f552;': 'üïí',
    '&#x1f553;': 'üïì',
    '&#x1f554;': 'üïî',
    '&#x1f555;': 'üïï',
    '&#x1f556;': 'üïñ',
    '&#x1f557;': 'üïó',
    '&#x1f558;': 'üïò',
    '&#x1f559;': 'üïô',
    '&#x1f55a;': 'üïö',
    '&#x1f55b;': 'üïõ',
    '&#x1f55c;': 'üïú',
    '&#x1f55d;': 'üïù',
    '&#x1f55e;': 'üïû',
    '&#x1f55f;': 'üïü',
    '&#x1f560;': 'üï†',
    '&#x1f561;': 'üï°',
    '&#x1f562;': 'üï¢',
    '&#x1f563;': 'üï£',
    '&#x1f564;': 'üï§',
    '&#x1f565;': 'üï•',
    '&#x1f566;': 'üï¶',
    '&#x1f567;': 'üïß',
    '&#x1f56f;': 'üïØ',
    '&#x1f570;': 'üï∞',
    '&#x1f573;': 'üï≥',
    '&#x1f574;': 'üï¥',
    '&#x1f575;': 'üïµ',
    '&#x1f576;': 'üï∂',
    '&#x1f577;': 'üï∑',
    '&#x1f578;': 'üï∏',
    '&#x1f579;': 'üïπ',
    '&#x1f57a;': 'üï∫',
    '&#x1f587;': 'üñá',
    '&#x1f58a;': 'üñä',
    '&#x1f58b;': 'üñã',
    '&#x1f58c;': 'üñå',
    '&#x1f58d;': 'üñç',
    '&#x1f590;': 'üñê',
    '&#x1f595;': 'üñï',
    '&#x1f596;': 'üññ',
    '&#x1f5a4;': 'üñ§',
    '&#x1f5a5;': 'üñ•',
    '&#x1f5a8;': 'üñ®',
    '&#x1f5b1;': 'üñ±',
    '&#x1f5b2;': 'üñ≤',
    '&#x1f5bc;': 'üñº',
    '&#x1f5c2;': 'üóÇ',
    '&#x1f5c3;': 'üóÉ',
    '&#x1f5c4;': 'üóÑ',
    '&#x1f5d1;': 'üóë',
    '&#x1f5d2;': 'üóí',
    '&#x1f5d3;': 'üóì',
    '&#x1f5dc;': 'üóú',
    '&#x1f5dd;': 'üóù',
    '&#x1f5de;': 'üóû',
    '&#x1f5e1;': 'üó°',
    '&#x1f5e3;': 'üó£',
    '&#x1f5e8;': 'üó®',
    '&#x1f5ef;': 'üóØ',
    '&#x1f5f3;': 'üó≥',
    '&#x1f5fa;': 'üó∫',
    '&#x1f5fb;': 'üóª',
    '&#x1f5fc;': 'üóº',
    '&#x1f5fd;': 'üóΩ',
    '&#x1f5fe;': 'üóæ',
    '&#x1f5ff;': 'üóø',
    '&#x1f600;': 'üòÄ',
    '&#x1f601;': 'üòÅ',
    '&#x1f602;': 'üòÇ',
    '&#x1f603;': 'üòÉ',
    '&#x1f604;': 'üòÑ',
    '&#x1f605;': 'üòÖ',
    '&#x1f606;': 'üòÜ',
    '&#x1f607;': 'üòá',
    '&#x1f608;': 'üòà',
    '&#x1f609;': 'üòâ',
    '&#x1f60a;': 'üòä',
    '&#x1f60b;': 'üòã',
    '&#x1f60c;': 'üòå',
    '&#x1f60d;': 'üòç',
    '&#x1f60e;': 'üòé',
    '&#x1f60f;': 'üòè',
    '&#x1f610;': 'üòê',
    '&#x1f611;': 'üòë',
    '&#x1f612;': 'üòí',
    '&#x1f613;': 'üòì',
    '&#x1f614;': 'üòî',
    '&#x1f615;': 'üòï',
    '&#x1f616;': 'üòñ',
    '&#x1f617;': 'üòó',
    '&#x1f618;': 'üòò',
    '&#x1f619;': 'üòô',
    '&#x1f61a;': 'üòö',
    '&#x1f61b;': 'üòõ',
    '&#x1f61c;': 'üòú',
    '&#x1f61d;': 'üòù',
    '&#x1f61e;': 'üòû',
    '&#x1f61f;': 'üòü',
    '&#x1f620;': 'üò†',
    '&#x1f621;': 'üò°',
    '&#x1f622;': 'üò¢',
    '&#x1f623;': 'üò£',
    '&#x1f624;': 'üò§',
    '&#x1f625;': 'üò•',
    '&#x1f626;': 'üò¶',
    '&#x1f627;': 'üòß',
    '&#x1f628;': 'üò®',
    '&#x1f629;': 'üò©',
    '&#x1f62a;': 'üò™',
    '&#x1f62b;': 'üò´',
    '&#x1f62c;': 'üò¨',
    '&#x1f62d;': 'üò≠',
    '&#x1f62e;': 'üòÆ',
    '&#x1f62f;': 'üòØ',
    '&#x1f630;': 'üò∞',
    '&#x1f631;': 'üò±',
    '&#x1f632;': 'üò≤',
    '&#x1f633;': 'üò≥',
    '&#x1f634;': 'üò¥',
    '&#x1f635;': 'üòµ',
    '&#x1f636;': 'üò∂',
    '&#x1f637;': 'üò∑',
    '&#x1f638;': 'üò∏',
    '&#x1f639;': 'üòπ',
    '&#x1f63a;': 'üò∫',
    '&#x1f63b;': 'üòª',
    '&#x1f63c;': 'üòº',
    '&#x1f63d;': 'üòΩ',
    '&#x1f63e;': 'üòæ',
    '&#x1f63f;': 'üòø',
    '&#x1f640;': 'üôÄ',
    '&#x1f641;': 'üôÅ',
    '&#x1f642;': 'üôÇ',
    '&#x1f643;': 'üôÉ',
    '&#x1f644;': 'üôÑ',
    '&#x1f645;': 'üôÖ',
    '&#x1f646;': 'üôÜ',
    '&#x1f647;': 'üôá',
    '&#x1f648;': 'üôà',
    '&#x1f649;': 'üôâ',
    '&#x1f64a;': 'üôä',
    '&#x1f64b;': 'üôã',
    '&#x1f64c;': 'üôå',
    '&#x1f64d;': 'üôç',
    '&#x1f64e;': 'üôé',
    '&#x1f64f;': 'üôè',
    '&#x1f680;': 'üöÄ',
    '&#x1f681;': 'üöÅ',
    '&#x1f682;': 'üöÇ',
    '&#x1f683;': 'üöÉ',
    '&#x1f684;': 'üöÑ',
    '&#x1f685;': 'üöÖ',
    '&#x1f686;': 'üöÜ',
    '&#x1f687;': 'üöá',
    '&#x1f688;': 'üöà',
    '&#x1f689;': 'üöâ',
    '&#x1f68a;': 'üöä',
    '&#x1f68b;': 'üöã',
    '&#x1f68c;': 'üöå',
    '&#x1f68d;': 'üöç',
    '&#x1f68e;': 'üöé',
    '&#x1f68f;': 'üöè',
    '&#x1f690;': 'üöê',
    '&#x1f691;': 'üöë',
    '&#x1f692;': 'üöí',
    '&#x1f693;': 'üöì',
    '&#x1f694;': 'üöî',
    '&#x1f695;': 'üöï',
    '&#x1f696;': 'üöñ',
    '&#x1f697;': 'üöó',
    '&#x1f698;': 'üöò',
    '&#x1f699;': 'üöô',
    '&#x1f69a;': 'üöö',
    '&#x1f69b;': 'üöõ',
    '&#x1f69c;': 'üöú',
    '&#x1f69d;': 'üöù',
    '&#x1f69e;': 'üöû',
    '&#x1f69f;': 'üöü',
    '&#x1f6a0;': 'üö†',
    '&#x1f6a1;': 'üö°',
    '&#x1f6a2;': 'üö¢',
    '&#x1f6a3;': 'üö£',
    '&#x1f6a4;': 'üö§',
    '&#x1f6a5;': 'üö•',
    '&#x1f6a6;': 'üö¶',
    '&#x1f6a7;': 'üöß',
    '&#x1f6a8;': 'üö®',
    '&#x1f6a9;': 'üö©',
    '&#x1f6aa;': 'üö™',
    '&#x1f6ab;': 'üö´',
    '&#x1f6ac;': 'üö¨',
    '&#x1f6ad;': 'üö≠',
    '&#x1f6ae;': 'üöÆ',
    '&#x1f6af;': 'üöØ',
    '&#x1f6b0;': 'üö∞',
    '&#x1f6b1;': 'üö±',
    '&#x1f6b2;': 'üö≤',
    '&#x1f6b3;': 'üö≥',
    '&#x1f6b4;': 'üö¥',
    '&#x1f6b5;': 'üöµ',
    '&#x1f6b6;': 'üö∂',
    '&#x1f6b7;': 'üö∑',
    '&#x1f6b8;': 'üö∏',
    '&#x1f6b9;': 'üöπ',
    '&#x1f6ba;': 'üö∫',
    '&#x1f6bb;': 'üöª',
    '&#x1f6bc;': 'üöº',
    '&#x1f6bd;': 'üöΩ',
    '&#x1f6be;': 'üöæ',
    '&#x1f6bf;': 'üöø',
    '&#x1f6c0;': 'üõÄ',
    '&#x1f6c1;': 'üõÅ',
    '&#x1f6c2;': 'üõÇ',
    '&#x1f6c3;': 'üõÉ',
    '&#x1f6c4;': 'üõÑ',
    '&#x1f6c5;': 'üõÖ',
    '&#x1f6cb;': 'üõã',
    '&#x1f6cc;': 'üõå',
    '&#x1f6cd;': 'üõç',
    '&#x1f6ce;': 'üõé',
    '&#x1f6cf;': 'üõè',
    '&#x1f6d0;': 'üõê',
    '&#x1f6d1;': 'üõë',
    '&#x1f6d2;': 'üõí',
    '&#x1f6d5;': 'üõï',
    '&#x1f6e0;': 'üõ†',
    '&#x1f6e1;': 'üõ°',
    '&#x1f6e2;': 'üõ¢',
    '&#x1f6e3;': 'üõ£',
    '&#x1f6e4;': 'üõ§',
    '&#x1f6e5;': 'üõ•',
    '&#x1f6e9;': 'üõ©',
    '&#x1f6eb;': 'üõ´',
    '&#x1f6ec;': 'üõ¨',
    '&#x1f6f0;': 'üõ∞',
    '&#x1f6f3;': 'üõ≥',
    '&#x1f6f4;': 'üõ¥',
    '&#x1f6f5;': 'üõµ',
    '&#x1f6f6;': 'üõ∂',
    '&#x1f6f7;': 'üõ∑',
    '&#x1f6f8;': 'üõ∏',
    '&#x1f6f9;': 'üõπ',
    '&#x1f6fa;': 'üõ∫',
    '&#x1f7e0;': 'üü†',
    '&#x1f7e1;': 'üü°',
    '&#x1f7e2;': 'üü¢',
    '&#x1f7e3;': 'üü£',
    '&#x1f7e4;': 'üü§',
    '&#x1f7e5;': 'üü•',
    '&#x1f7e6;': 'üü¶',
    '&#x1f7e7;': 'üüß',
    '&#x1f7e8;': 'üü®',
    '&#x1f7e9;': 'üü©',
    '&#x1f7ea;': 'üü™',
    '&#x1f7eb;': 'üü´',
    '&#x1f90d;': 'ü§ç',
    '&#x1f90e;': 'ü§é',
    '&#x1f90f;': 'ü§è',
    '&#x1f910;': 'ü§ê',
    '&#x1f911;': 'ü§ë',
    '&#x1f912;': 'ü§í',
    '&#x1f913;': 'ü§ì',
    '&#x1f914;': 'ü§î',
    '&#x1f915;': 'ü§ï',
    '&#x1f916;': 'ü§ñ',
    '&#x1f917;': 'ü§ó',
    '&#x1f918;': 'ü§ò',
    '&#x1f919;': 'ü§ô',
    '&#x1f91a;': 'ü§ö',
    '&#x1f91b;': 'ü§õ',
    '&#x1f91c;': 'ü§ú',
    '&#x1f91d;': 'ü§ù',
    '&#x1f91e;': 'ü§û',
    '&#x1f91f;': 'ü§ü',
    '&#x1f920;': 'ü§†',
    '&#x1f921;': 'ü§°',
    '&#x1f922;': 'ü§¢',
    '&#x1f923;': 'ü§£',
    '&#x1f924;': 'ü§§',
    '&#x1f925;': 'ü§•',
    '&#x1f926;': 'ü§¶',
    '&#x1f927;': 'ü§ß',
    '&#x1f928;': 'ü§®',
    '&#x1f929;': 'ü§©',
    '&#x1f92a;': 'ü§™',
    '&#x1f92b;': 'ü§´',
    '&#x1f92c;': 'ü§¨',
    '&#x1f92d;': 'ü§≠',
    '&#x1f92e;': 'ü§Æ',
    '&#x1f92f;': 'ü§Ø',
    '&#x1f930;': 'ü§∞',
    '&#x1f931;': 'ü§±',
    '&#x1f932;': 'ü§≤',
    '&#x1f933;': 'ü§≥',
    '&#x1f934;': 'ü§¥',
    '&#x1f935;': 'ü§µ',
    '&#x1f936;': 'ü§∂',
    '&#x1f937;': 'ü§∑',
    '&#x1f938;': 'ü§∏',
    '&#x1f939;': 'ü§π',
    '&#x1f93a;': 'ü§∫',
    '&#x1f93c;': 'ü§º',
    '&#x1f93d;': 'ü§Ω',
    '&#x1f93e;': 'ü§æ',
    '&#x1f940;': 'ü•Ä',
    '&#x1f941;': 'ü•Å',
    '&#x1f942;': 'ü•Ç',
    '&#x1f943;': 'ü•É',
    '&#x1f944;': 'ü•Ñ',
    '&#x1f945;': 'ü•Ö',
    '&#x1f947;': 'ü•á',
    '&#x1f948;': 'ü•à',
    '&#x1f949;': 'ü•â',
    '&#x1f94a;': 'ü•ä',
    '&#x1f94b;': 'ü•ã',
    '&#x1f94c;': 'ü•å',
    '&#x1f94d;': 'ü•ç',
    '&#x1f94e;': 'ü•é',
    '&#x1f94f;': 'ü•è',
    '&#x1f950;': 'ü•ê',
    '&#x1f951;': 'ü•ë',
    '&#x1f952;': 'ü•í',
    '&#x1f953;': 'ü•ì',
    '&#x1f954;': 'ü•î',
    '&#x1f955;': 'ü•ï',
    '&#x1f956;': 'ü•ñ',
    '&#x1f957;': 'ü•ó',
    '&#x1f958;': 'ü•ò',
    '&#x1f959;': 'ü•ô',
    '&#x1f95a;': 'ü•ö',
    '&#x1f95b;': 'ü•õ',
    '&#x1f95c;': 'ü•ú',
    '&#x1f95d;': 'ü•ù',
    '&#x1f95e;': 'ü•û',
    '&#x1f95f;': 'ü•ü',
    '&#x1f960;': 'ü•†',
    '&#x1f961;': 'ü•°',
    '&#x1f962;': 'ü•¢',
    '&#x1f963;': 'ü•£',
    '&#x1f964;': 'ü•§',
    '&#x1f965;': 'ü••',
    '&#x1f966;': 'ü•¶',
    '&#x1f967;': 'ü•ß',
    '&#x1f968;': 'ü•®',
    '&#x1f969;': 'ü•©',
    '&#x1f96a;': 'ü•™',
    '&#x1f96b;': 'ü•´',
    '&#x1f96c;': 'ü•¨',
    '&#x1f96d;': 'ü•≠',
    '&#x1f96e;': 'ü•Æ',
    '&#x1f96f;': 'ü•Ø',
    '&#x1f970;': 'ü•∞',
    '&#x1f971;': 'ü•±',
    '&#x1f972;': 'ü•≤',
    '&#x1f973;': 'ü•≥',
    '&#x1f974;': 'ü•¥',
    '&#x1f975;': 'ü•µ',
    '&#x1f976;': 'ü•∂',
    '&#x1f977;': 'ü•∑',
    '&#x1f978;': 'ü•∏',
    '&#x1f979;': 'ü•π',
    '&#x1f97a;': 'ü•∫',
    '&#x1f97b;': 'ü•ª',
    '&#x1f97c;': 'ü•º',
    '&#x1f97d;': 'ü•Ω',
    '&#x1f97e;': 'ü•æ',
    '&#x1f97f;': 'ü•ø',
    '&#x1f980;': 'ü¶Ä',
    '&#x1f981;': 'ü¶Å',
    '&#x1f982;': 'ü¶Ç',
    '&#x1f983;': 'ü¶É',
    '&#x1f984;': 'ü¶Ñ',
    '&#x1f985;': 'ü¶Ö',
    '&#x1f986;': 'ü¶Ü',
    '&#x1f987;': 'ü¶á',
    '&#x1f988;': 'ü¶à',
    '&#x1f989;': 'ü¶â',
    '&#x1f98a;': 'ü¶ä',
    '&#x1f98b;': 'ü¶ã',
    '&#x1f98c;': 'ü¶å',
    '&#x1f98d;': 'ü¶ç',
    '&#x1f98e;': 'ü¶é',
    '&#x1f98f;': 'ü¶è',
    '&#x1f990;': 'ü¶ê',
    '&#x1f991;': 'ü¶ë',
    '&#x1f992;': 'ü¶í',
    '&#x1f993;': 'ü¶ì',
    '&#x1f994;': 'ü¶î',
    '&#x1f995;': 'ü¶ï',
    '&#x1f996;': 'ü¶ñ',
    '&#x1f997;': 'ü¶ó',
    '&#x1f998;': 'ü¶ò',
    '&#x1f999;': 'ü¶ô',
    '&#x1f99a;': 'ü¶ö',
    '&#x1f99b;': 'ü¶õ',
    '&#x1f99c;': 'ü¶ú',
    '&#x1f99d;': 'ü¶ù',
    '&#x1f99e;': 'ü¶û',
    '&#x1f99f;': 'ü¶ü',
    '&#x1f9a0;': 'ü¶†',
    '&#x1f9a1;': 'ü¶°',
    '&#x1f9a2;': 'ü¶¢',
    '&#x1f9a3;': 'ü¶£',
    '&#x1f9a4;': 'ü¶§',
    '&#x1f9a5;': 'ü¶•',
    '&#x1f9a6;': 'ü¶¶',
    '&#x1f9a7;': 'ü¶ß',
    '&#x1f9a8;': 'ü¶®',
    '&#x1f9a9;': 'ü¶©',
    '&#x1f9aa;': 'ü¶™',
    '&#x1f9ab;': 'ü¶´',
    '&#x1f9ac;': 'ü¶¨',
    '&#x1f9ad;': 'ü¶≠',
    '&#x1f9ae;': 'ü¶Æ',
    '&#x1f9af;': 'ü¶Ø',
    '&#x1f9b0;': 'ü¶∞',
    '&#x1f9b1;': 'ü¶±',
    '&#x1f9b2;': 'ü¶≤',
    '&#x1f9b3;': 'ü¶≥',
    '&#x1f9b4;': 'ü¶¥',
    '&#x1f9b5;': 'ü¶µ',
    '&#x1f9b6;': 'ü¶∂',
    '&#x1f9b7;': 'ü¶∑',
    '&#x1f9b8;': 'ü¶∏',
    '&#x1f9b9;': 'ü¶π',
    '&#x1f9ba;': 'ü¶∫',
    '&#x1f9bb;': 'ü¶ª',
    '&#x1f9bc;': 'ü¶º',
    '&#x1f9bd;': 'ü¶Ω',
    '&#x1f9be;': 'ü¶æ',
    '&#x1f9bf;': 'ü¶ø',
    '&#x1f9c0;': 'üßÄ',
    '&#x1f9c1;': 'üßÅ',
    '&#x1f9c2;': 'üßÇ',
    '&#x1f9c3;': 'üßÉ',
    '&#x1f9c4;': 'üßÑ',
    '&#x1f9c5;': 'üßÖ',
    '&#x1f9c6;': 'üßÜ',
    '&#x1f9c7;': 'üßá',
    '&#x1f9c8;': 'üßà',
    '&#x1f9c9;': 'üßâ',
    '&#x1f9ca;': 'üßä',
    '&#x1f9cb;': 'üßã',
    '&#x1f9cc;': 'üßå',
    '&#x1f9cd;': 'üßç',
    '&#x1f9ce;': 'üßé',
    '&#x1f9cf;': 'üßè',
    '&#x1f9d0;': 'üßê',
    '&#x1f9d1;': 'üßë',
    '&#x1f9d2;': 'üßí',
    '&#x1f9d3;': 'üßì',
    '&#x1f9d4;': 'üßî',
    '&#x1f9d5;': 'üßï',
    '&#x1f9d6;': 'üßñ',
    '&#x1f9d7;': 'üßó',
    '&#x1f9d8;': 'üßò',
    '&#x1f9d9;': 'üßô',
    '&#x1f9da;': 'üßö',
    '&#x1f9db;': 'üßõ',
    '&#x1f9dc;': 'üßú',
    '&#x1f9dd;': 'üßù',
    '&#x1f9de;': 'üßû',
    '&#x1f9df;': 'üßü',
    '&#x1f9e0;': 'üß†',
    '&#x1f9e1;': 'üß°',
    '&#x1f9e2;': 'üß¢',
    '&#x1f9e3;': 'üß£',
    '&#x1f9e4;': 'üß§',
    '&#x1f9e5;': 'üß•',
    '&#x1f9e6;': 'üß¶',
    '&#x1f9e7;': 'üßß',
    '&#x1f9e8;': 'üß®',
    '&#x1f9e9;': 'üß©',
    '&#x1f9ea;': 'üß™',
    '&#x1f9eb;': 'üß´',
    '&#x1f9ec;': 'üß¨',
    '&#x1f9ed;': 'üß≠',
    '&#x1f9ee;': 'üßÆ',
    '&#x1f9ef;': 'üßØ',
    '&#x1f9f0;': 'üß∞',
    '&#x1f9f1;': 'üß±',
    '&#x1f9f2;': 'üß≤',
    '&#x1f9f3;': 'üß≥',
    '&#x1f9f4;': 'üß¥',
    '&#x1f9f5;': 'üßµ',
    '&#x1f9f6;': 'üß∂',
    '&#x1f9f7;': 'üß∑',
    '&#x1f9f8;': 'üß∏',
    '&#x1f9f9;': 'üßπ',
    '&#x1f9fa;': 'üß∫',
    '&#x1f9fb;': 'üßª',
    '&#x1f9fc;': 'üßº',
    '&#x1f9fd;': 'üßΩ',
    '&#x1f9fe;': 'üßæ',
    '&#x1f9ff;': 'üßø',
    '&#x1fa70;': 'ü©∞',
    '&#x1fa71;': 'ü©±',
    '&#x1fa72;': 'ü©≤',
    '&#x1fa73;': 'ü©≥',
    '&#x1fa74;': 'ü©¥',
    '&#x1fa78;': 'ü©∏',
    '&#x1fa79;': 'ü©π',
    '&#x1fa7a;': 'ü©∫',
    '&#x1fa80;': 'ü™Ä',
    '&#x1fa81;': 'ü™Å',
    '&#x1fa82;': 'ü™Ç',
    '&#x1fa83;': 'ü™É',
    '&#x1fa84;': 'ü™Ñ',
    '&#x1fa85;': 'ü™Ö',
    '&#x1fa86;': 'ü™Ü',
    '&#x1fa90;': 'ü™ê',
    '&#x1fa91;': 'ü™ë',
    '&#x1fa92;': 'ü™í',
    '&#x1fa93;': 'ü™ì',
    '&#x1fa94;': 'ü™î',
    '&#x1fa95;': 'ü™ï',
    '&#x1fa96;': 'ü™ñ',
    '&#x1fa97;': 'ü™ó',
    '&#x1fa98;': 'ü™ò',
    '&#x1fa99;': 'ü™ô',
    '&#x1fa9a;': 'ü™ö',
    '&#x1fa9b;': 'ü™õ',
    '&#x1fa9c;': 'ü™ú',
    '&#x1fa9d;': 'ü™ù',
    '&#x1fa9e;': 'ü™û',
    '&#x1fa9f;': 'ü™ü',
    '&#x1faa0;': 'ü™†',
    '&#x1faa1;': 'ü™°',
    '&#x1faa2;': 'ü™¢',
    '&#x1faa3;': 'ü™£',
    '&#x1faa4;': 'ü™§',
    '&#x1faa5;': 'ü™•',
    '&#x1faa6;': 'ü™¶',
    '&#x1faa7;': 'ü™ß',
    '&#x1faa8;': 'ü™®',
    '&#x1fab0;': 'ü™∞',
    '&#x1fab1;': 'ü™±',
    '&#x1fab2;': 'ü™≤',
    '&#x1fab3;': 'ü™≥',
    '&#x1fab4;': 'ü™¥',
    '&#x1fab5;': 'ü™µ',
    '&#x1fab6;': 'ü™∂',
    '&#x1fac0;': 'ü´Ä',
    '&#x1fac1;': 'ü´Å',
    '&#x1fac2;': 'ü´Ç',
    '&#x1fad0;': 'ü´ê',
    '&#x1fad1;': 'ü´ë',
    '&#x1fad2;': 'ü´í',
    '&#x1fad3;': 'ü´ì',
    '&#x1fad4;': 'ü´î',
    '&#x1fad5;': 'ü´ï',
    '&#x1fad6;': 'ü´ñ',
    '&#x1fae0;': 'ü´†',
    '&#x1fae1;': 'ü´°',
    '&#x1fae2;': 'ü´¢',
    '&#x1fae3;': 'ü´£',
    '&#x1fae4;': 'ü´§',
    '&#x1fae5;': 'ü´•',
    '&#x1fae6;': 'ü´¶',
    '&#x1fae7;': 'ü´ß',
    '&#x1faf0;': 'ü´∞',
    '&#x1faf1;': 'ü´±',
    '&#x1faf2;': 'ü´≤',
    '&#x1faf3;': 'ü´≥',
    '&#x1faf4;': 'ü´¥',
    '&#x1faf5;': 'ü´µ',
    '&#x1faf6;': 'ü´∂',
    '&#x203c;': '‚Äº',
    '&#x2049;': '‚Åâ',
    '&#x2122;': '‚Ñ¢',
    '&#x2139;': '‚Ñπ',
    '&#x2194;': '‚Üî',
    '&#x2195;': '‚Üï',
    '&#x2196;': '‚Üñ',
    '&#x2197;': '‚Üó',
    '&#x2198;': '‚Üò',
    '&#x2199;': '‚Üô',
    '&#x21a9;': '‚Ü©',
    '&#x21aa;': '‚Ü™',
    '&#x231a;': '‚åö',
    '&#x231b;': '‚åõ',
    '&#x2328;': '‚å®',
    '&#x23cf;': '‚èè',
    '&#x23e9;': '‚è©',
    '&#x23ea;': '‚è™',
    '&#x23eb;': '‚è´',
    '&#x23ec;': '‚è¨',
    '&#x23ed;': '‚è≠',
    '&#x23ee;': '‚èÆ',
    '&#x23ef;': '‚èØ',
    '&#x23f0;': '‚è∞',
    '&#x23f1;': '‚è±',
    '&#x23f2;': '‚è≤',
    '&#x23f3;': '‚è≥',
    '&#x23f8;': '‚è∏',
    '&#x23f9;': '‚èπ',
    '&#x23fa;': '‚è∫',
    '&#x24c2;': '‚ìÇ',
    '&#x25aa;': '‚ñ™',
    '&#x25ab;': '‚ñ´',
    '&#x25b6;': '‚ñ∂',
    '&#x25c0;': '‚óÄ',
    '&#x25fb;': '‚óª',
    '&#x25fc;': '‚óº',
    '&#x25fd;': '‚óΩ',
    '&#x25fe;': '‚óæ',
    '&#x2600;': '‚òÄ',
    '&#x2601;': '‚òÅ',
    '&#x2602;': '‚òÇ',
    '&#x2603;': '‚òÉ',
    '&#x2604;': '‚òÑ',
    '&#x260e;': '‚òé',
    '&#x2611;': '‚òë',
    '&#x2614;': '‚òî',
    '&#x2615;': '‚òï',
    '&#x2618;': '‚òò',
    '&#x261d;': '‚òù',
    '&#x2620;': '‚ò†',
    '&#x2622;': '‚ò¢',
    '&#x2623;': '‚ò£',
    '&#x2626;': '‚ò¶',
    '&#x262a;': '‚ò™',
    '&#x262e;': '‚òÆ',
    '&#x262f;': '‚òØ',
    '&#x2638;': '‚ò∏',
    '&#x2639;': '‚òπ',
    '&#x263a;': '‚ò∫',
    '&#x2640;': '‚ôÄ',
    '&#x2642;': '‚ôÇ',
    '&#x2648;': '‚ôà',
    '&#x2649;': '‚ôâ',
    '&#x264a;': '‚ôä',
    '&#x264b;': '‚ôã',
    '&#x264c;': '‚ôå',
    '&#x264d;': '‚ôç',
    '&#x264e;': '‚ôé',
    '&#x264f;': '‚ôè',
    '&#x2650;': '‚ôê',
    '&#x2651;': '‚ôë',
    '&#x2652;': '‚ôí',
    '&#x2653;': '‚ôì',
    '&#x265f;': '‚ôü',
    '&#x2660;': '‚ô†',
    '&#x2663;': '‚ô£',
    '&#x2665;': '‚ô•',
    '&#x2666;': '‚ô¶',
    '&#x2668;': '‚ô®',
    '&#x267b;': '‚ôª',
    '&#x267e;': '‚ôæ',
    '&#x267f;': '‚ôø',
    '&#x2692;': '‚öí',
    '&#x2693;': '‚öì',
    '&#x2694;': '‚öî',
    '&#x2695;': '‚öï',
    '&#x2696;': '‚öñ',
    '&#x2697;': '‚öó',
    '&#x2699;': '‚öô',
    '&#x269b;': '‚öõ',
    '&#x269c;': '‚öú',
    '&#x26a0;': '‚ö†',
    '&#x26a1;': '‚ö°',
    '&#x26aa;': '‚ö™',
    '&#x26ab;': '‚ö´',
    '&#x26b0;': '‚ö∞',
    '&#x26b1;': '‚ö±',
    '&#x26bd;': '‚öΩ',
    '&#x26be;': '‚öæ',
    '&#x26c4;': '‚õÑ',
    '&#x26c5;': '‚õÖ',
    '&#x26c8;': '‚õà',
    '&#x26ce;': '‚õé',
    '&#x26cf;': '‚õè',
    '&#x26d1;': '‚õë',
    '&#x26d3;': '‚õì',
    '&#x26d4;': '‚õî',
    '&#x26e9;': '‚õ©',
    '&#x26ea;': '‚õ™',
    '&#x26f0;': '‚õ∞',
    '&#x26f1;': '‚õ±',
    '&#x26f2;': '‚õ≤',
    '&#x26f3;': '‚õ≥',
    '&#x26f4;': '‚õ¥',
    '&#x26f5;': '‚õµ',
    '&#x26f7;': '‚õ∑',
    '&#x26f8;': '‚õ∏',
    '&#x26f9;': '‚õπ',
    '&#x26fa;': '‚õ∫',
    '&#x26fd;': '‚õΩ',
    '&#x2702;': '‚úÇ',
    '&#x2705;': '‚úÖ',
    '&#x2708;': '‚úà',
    '&#x2709;': '‚úâ',
    '&#x270a;': '‚úä',
    '&#x270b;': '‚úã',
    '&#x270c;': '‚úå',
    '&#x270d;': '‚úç',
    '&#x270f;': '‚úè',
    '&#x2712;': '‚úí',
    '&#x2714;': '‚úî',
    '&#x2716;': '‚úñ',
    '&#x271d;': '‚úù',
    '&#x2721;': '‚ú°',
    '&#x2728;': '‚ú®',
    '&#x2733;': '‚ú≥',
    '&#x2734;': '‚ú¥',
    '&#x2744;': '‚ùÑ',
    '&#x2747;': '‚ùá',
    '&#x274c;': '‚ùå',
    '&#x274e;': '‚ùé',
    '&#x2753;': '‚ùì',
    '&#x2754;': '‚ùî',
    '&#x2755;': '‚ùï',
    '&#x2757;': '‚ùó',
    '&#x2763;': '‚ù£',
    '&#x2764;': '‚ù§',
    '&#x2795;': '‚ûï',
    '&#x2796;': '‚ûñ',
    '&#x2797;': '‚ûó',
    '&#x27a1;': '‚û°',
    '&#x27b0;': '‚û∞',
    '&#x27bf;': '‚ûø',
    '&#x2934;': '‚§¥',
    '&#x2935;': '‚§µ',
    '&#x2b05;': '‚¨Ö',
    '&#x2b06;': '‚¨Ü',
    '&#x2b07;': '‚¨á',
    '&#x2b1b;': '‚¨õ',
    '&#x2b1c;': '‚¨ú',
    '&#x2b50;': '‚≠ê',
    '&#x2b55;': '‚≠ï',
    '&#x3030;': '„Ä∞',
    '&#x303d;': '„ÄΩ',
    '&#x3297;': '„äó',
    '&#x3299;': '„äô',
    '&#xe50a;': 'Û†Å™',
    '&#xfe0f;': 'Ô∏è'
};

// Function to convert HTML entities to Unicode
function decodeHtmlEntities(text) {
    let result = text;
    
    // First handle numeric entities (both decimal and hex)
    result = result.replace(/&#x([0-9a-fA-F]+);/g, (match, hex) => {
        const codePoint = parseInt(hex, 16);
        return String.fromCodePoint(codePoint);
    });
    
    result = result.replace(/&#(\d+);/g, (match, decimal) => {
        const codePoint = parseInt(decimal, 10);
        return String.fromCodePoint(codePoint);
    });
    
    // Then handle named entities
    for (const [entity, unicode] of Object.entries(htmlEntities)) {
        result = result.replace(new RegExp(entity.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), unicode);
    }
    
    return result;
}

// Function to convert WordPress caption shortcodes to Markdown
function convertWordPressCaption(content) {
    // Pattern to match WordPress caption shortcode with markdown image inside
    const captionPattern = /\[caption[^\]]*\](!\[[^\]]*\]\([^)]+\))([^[\]]*)\[\/caption\]/gi;
    
    return content.replace(captionPattern, (match, imgMarkdown, caption) => {
        const cleanCaption = caption.trim();
        
        if (cleanCaption) {
            return `${imgMarkdown}\n*${cleanCaption}*`;
        } else {
            return imgMarkdown;
        }
    });
}

// Function to convert WordPress image URLs to Astro asset paths
function convertWordPressUrlToAssetPath(url) {
    // Pattern to match WordPress upload URLs
    const wpUploadPattern = /https?:\/\/[^\/]+\/wp-content\/uploads\/(\d{4})\/(\d{2})\/(.+)/;
    const match = url.match(wpUploadPattern);
    
    if (match) {
        const [, year, month, filename] = match;
        return `~/assets/images/${year}/${month}/${filename}`;
    }
    
    // If it's already an asset path, return as is
    if (url.startsWith('~/assets/images/')) {
        return url;
    }
    
    // If it's a relative path, convert to asset path
    if (url.startsWith('/assets/images/')) {
        return `~${url}`;
    }
    
    // For other cases, return as is
    return url;
}

// Function to find existing image files
async function findExistingImages(assetsDir) {
    const imageMap = new Map();
    
    async function scanDirectory(dir) {
        try {
            const entries = await readdir(dir);
            
            for (const entry of entries) {
                const fullPath = path.join(dir, entry);
                const stats = await stat(fullPath);
                
                if (stats.isDirectory()) {
                    await scanDirectory(fullPath);
                } else if (stats.isFile() && /\.(jpg|jpeg|png|gif|svg|webp)$/i.test(entry)) {
                    const relativePath = path.relative(assetsDir, fullPath);
                    const assetPath = `~/assets/images/${relativePath.replace(/\\/g, '/')}`;
                    imageMap.set(entry.toLowerCase(), assetPath);
                    
                    // Also map without extension for flexible matching
                    const nameWithoutExt = entry.replace(/\.[^.]+$/, '').toLowerCase();
                    if (!imageMap.has(nameWithoutExt)) {
                        imageMap.set(nameWithoutExt, assetPath);
                    }
                }
            }
        } catch (error) {
            // Directory might not exist, continue
        }
    }
    
    await scanDirectory(assetsDir);
    return imageMap;
}

// Function to process a single markdown file
async function processMarkdownFile(filePath, logger, imageMap) {
    try {
        const content = await readFile(filePath, 'utf-8');
        const originalContent = content;
        
        let processedContent = content;
        let changes = [];
        
        // 1. Convert HTML entities to Unicode
        const entitiesConverted = decodeHtmlEntities(processedContent);
        if (entitiesConverted !== processedContent) {
            changes.push('HTML entities converted to Unicode');
            processedContent = entitiesConverted;
        }
        
        // 2. Convert WordPress caption shortcodes
        const captionsConverted = convertWordPressCaption(processedContent);
        if (captionsConverted !== processedContent) {
            changes.push('WordPress caption shortcodes converted to Markdown');
            processedContent = captionsConverted;
        }
        
        // 3. Convert WordPress image URLs to Astro asset paths
        const imageUrlPattern = /https?:\/\/[^\/]+\/wp-content\/uploads\/\d{4}\/\d{2}\/[^\s)]+\.(jpg|jpeg|png|gif|svg|webp)/gi;
        const imageUrlsConverted = processedContent.replace(imageUrlPattern, (match) => {
            changes.push(`WordPress image URL converted: ${match}`);
            return convertWordPressUrlToAssetPath(match);
        });
        
        if (imageUrlsConverted !== processedContent) {
            processedContent = imageUrlsConverted;
        }
        
        // 4. Fix any broken image references by matching with existing files
        const imageRefPattern = /!\[([^\]]*)\]\(([^)]+)\)/g;
        processedContent = processedContent.replace(imageRefPattern, (match, alt, src) => {
            // If it's already a proper asset path, leave it alone
            if (src.startsWith('~/assets/images/')) {
                return match;
            }
            
            // Try to find the image in our map
            const filename = path.basename(src).toLowerCase();
            const nameWithoutExt = filename.replace(/\.[^.]+$/, '');
            
            if (imageMap.has(filename)) {
                changes.push(`Image reference fixed: ${src} -> ${imageMap.get(filename)}`);
                return `![${alt}](${imageMap.get(filename)})`;
            } else if (imageMap.has(nameWithoutExt)) {
                changes.push(`Image reference fixed: ${src} -> ${imageMap.get(nameWithoutExt)}`);
                return `![${alt}](${imageMap.get(nameWithoutExt)})`;
            }
            
            return match;
        });
        
        // Only write file if there were changes
        if (processedContent !== originalContent) {
            await writeFile(filePath, processedContent, 'utf-8');
            logger.log('info', `Processed file with changes: ${changes.join(', ')}`, filePath);
            return { processed: true, changes };
        } else {
            logger.log('info', 'No changes needed', filePath);
            return { processed: false, changes: [] };
        }
        
    } catch (error) {
        logger.log('error', `Error processing file: ${error.message}`, filePath);
        return { processed: false, changes: [], error: error.message };
    }
}

// Function to create backup of posts
async function createBackup(postsDir, backupDir) {
    try {
        // Create backup directory if it doesn't exist
        if (!fs.existsSync(backupDir)) {
            fs.mkdirSync(backupDir, { recursive: true });
        }
        
        const files = await readdir(postsDir);
        let backupCount = 0;
        
        for (const file of files) {
            if (file.endsWith('.md') || file.endsWith('.mdx')) {
                const sourcePath = path.join(postsDir, file);
                const backupPath = path.join(backupDir, file);
                
                const content = await readFile(sourcePath, 'utf-8');
                await writeFile(backupPath, content, 'utf-8');
                backupCount++;
            }
        }
        
        return backupCount;
    } catch (error) {
        throw new Error(`Failed to create backup: ${error.message}`);
    }
}

// Main function
async function main() {
    const logger = new Logger(config.logFile);
    
    logger.log('info', 'Starting blog post processing...');
    
    try {
        // Create backup
        logger.log('info', 'Creating backup of blog posts...');
        const backupCount = await createBackup(config.postsDirectory, config.backupDirectory);
        logger.log('info', `Backup created: ${backupCount} files backed up to ${config.backupDirectory}`);
        
        // Scan for existing images
        logger.log('info', 'Scanning for existing images...');
        const imageMap = await findExistingImages(config.assetsDirectory);
        logger.log('info', `Found ${imageMap.size} images in assets directory`);
        
        // Process all markdown files
        logger.log('info', 'Processing markdown files...');
        const files = await readdir(config.postsDirectory);
        const markdownFiles = files.filter(file => file.endsWith('.md') || file.endsWith('.mdx'));
        
        let processedCount = 0;
        let changedCount = 0;
        let errorCount = 0;
        const allChanges = [];
        
        for (const file of markdownFiles) {
            const filePath = path.join(config.postsDirectory, file);
            const result = await processMarkdownFile(filePath, logger, imageMap);
            
            processedCount++;
            
            if (result.error) {
                errorCount++;
            } else if (result.processed) {
                changedCount++;
                allChanges.push({ file, changes: result.changes });
            }
        }
        
        // Summary
        logger.log('info', `Processing complete:`);
        logger.log('info', `  - Total files processed: ${processedCount}`);
        logger.log('info', `  - Files with changes: ${changedCount}`);
        logger.log('info', `  - Files with errors: ${errorCount}`);
        logger.log('info', `  - Files unchanged: ${processedCount - changedCount - errorCount}`);
        
        if (allChanges.length > 0) {
            logger.log('info', '\nSummary of changes:');
            allChanges.forEach(({ file, changes }) => {
                logger.log('info', `  ${file}:`);
                changes.forEach(change => {
                    logger.log('info', `    - ${change}`);
                });
            });
        }
        
        // Save logs
        await logger.saveLogs();
        
        console.log('\n‚úÖ Blog post processing completed successfully!');
        console.log(`üìÑ Check ${config.logFile} for detailed logs`);
        console.log(`üíæ Backup created in ${config.backupDirectory}`);
        
    } catch (error) {
        logger.log('error', `Fatal error: ${error.message}`);
        await logger.saveLogs();
        console.error('‚ùå Processing failed:', error.message);
        process.exit(1);
    }
}

// Run the script
if (require.main === module) {
    main().catch(console.error);
}

module.exports = {
    decodeHtmlEntities,
    convertWordPressCaption,
    convertWordPressUrlToAssetPath,
    findExistingImages,
    processMarkdownFile,
    createBackup
};